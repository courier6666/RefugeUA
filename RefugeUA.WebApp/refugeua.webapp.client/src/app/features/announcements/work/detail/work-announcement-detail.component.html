@if(this.workAnnouncement)
{
<div class="container">
    @if(this.isAuthenticated && this.isAllowedToEdit)
    {
    <div class="d-flex gap-4 pb-4 pt-2">
        <a class="btn btn-custom" [routerLink]="['/announcements', workAnnouncement.id, 'responses']">
            <i class="fa-solid fa-eye"></i>
            Переглянути відгуки
        </a>
        <a [routerLink]='["/announcements", "work" , this.workAnnouncement.id, "edit"]' class="btn btn-custom">
            <i class="fa-solid fa-pen"></i>
            Редагувати
        </a>
        <a [routerLink]="['/announcements', 'work', this.workAnnouncement.id, 'groups']" class="btn btn-custom">
            <i class="fa-solid fa-tag"></i>
            Переглянути групи
        </a>
        @if(!this.workAnnouncement.isClosed)
        {
        <button class="btn btn-custom" (click)="this.onClosed()">
            <i class="fa-solid fa-lock"></i>
            Закрити оголошення
        </button>
        }
        @else{
        <button class="btn btn-custom" (click)="this.onOpen()">
            <i class="fa-solid fa-lock-open"></i>
            Відкрити оголошення
        </button>
        }
        <button class="btn btn-custom-danger" (click)="this.onDelete()">
            <i class="fa-solid fa-trash-can"></i>
            Видалити
        </button>
        <div #deletionConfirmation style="display: none;" class="justify-content-between gap-2">
            <span class="align-middle pt-2">Ви впевнені?</span>
            <button class="btn btn-custom-green" (click)="confirmDeletion()">Так</button>
            <button class="btn btn-custom-danger" (click)="cancelDeletion()">Ні</button>
        </div>
    </div>
    }
    <div class="pb-4 d-flex justify-content-between">
        <div>
            <h2 class="text-custom-pale-yellow text-start">{{ workAnnouncement.title }}</h2>
            <h3 class="text-muted text-custom-pale-yellow text-start">
                {{ workAnnouncement.jobPosition }}
                <span *ngIf="workAnnouncement.companyName" class="text-custom-pale-yellow">, <strong>{{
                        workAnnouncement.companyName }}</strong></span>
            </h3>
            <div *ngIf="workAnnouncement.salaryLower || workAnnouncement.salaryUpper" class="text-start">
                <span class="fs-3 text-start text-custom-yellow">
                    <strong>
                        @if(workAnnouncement.salaryLower && workAnnouncement.salaryUpper)
                        {
                        {{workAnnouncement.salaryLower + ' - ' + workAnnouncement.salaryUpper}} UAH <i
                            class="fa-solid fa-hryvnia"></i>
                        }
                        @else if(workAnnouncement.salaryLower) {
                        {{'від ' + workAnnouncement.salaryLower}} UAH <i class="fa-solid fa-hryvnia"></i>
                        }
                        @else if(workAnnouncement.salaryUpper) {
                        {{'до ' + workAnnouncement.salaryUpper}} UAH <i class="fa-solid fa-hryvnia"></i>
                        }
                        @else {
                        Зарплата не вказана
                        }

                    </strong>
                </span>
            </div>

        </div>
        <div class="d-flex flex-column text-end pt-1">
            <span
                class="badge float-end bg-custom-dark text-custom-yellow lh-lg fs-5 p-0 mt-1">{{this.workAnnouncement.workCategory.name}}</span>
            <span class="lh-lg fw-normal text-start fs-5 text-custom-pale-yellow"><strong>Створена: {{
                    workAnnouncement.createdAt | date: 'longDate' }}</strong></span>
        </div>
    </div>
    <h3 class="text-start text-custom-pale-yellow">Опис</h3>
    <div class="pb-4">
        <app-content paragraphClass="lh-lg fw-normal text-start fs-5"
            [content]="this.workAnnouncement.content || ''"></app-content>
    </div>
    <h3 class="text-start text-custom-pale-yellow">Вимоги</h3>
    <div class="ms-3">
        <app-requirements-content listItemClass="lh-lg fw-normal text-start fs-5"
            [requirementsContent]="this.workAnnouncement.requirementsContent || ''"></app-requirements-content>
    </div>
    <app-contact-information [contactInformation]="this.workAnnouncement.contactInformation!"></app-contact-information>

    @if(this.workAnnouncement.address)
    {
    <app-address-detail [address]="this.workAnnouncement.address!"></app-address-detail>
    }

    <app-announcement-detail-acceptence [announcement]="this.workAnnouncement" [isAuthenticated]="this.isAuthenticated"
        [isAllowedToEdit]="this.isAllowedToEdit">
    </app-announcement-detail-acceptence>

    @if(this.authService.authSubject.value && this.authService.userClaims.role == Roles.MilitaryOrFamily)
    {
    <div>
        <app-response-create [announcementId]="this.workAnnouncement.id || 0"></app-response-create>
    </div>
    }
</div>
}
@else {
@if(isDeleted)
{
<div class="bg-custom-pale-green text-custom-lightest p-3 fw-normal fs-4 form-success-display">
    Оголошення видалено!
</div>
}
@else{
<img src="assets/gif/loading.gif" width="100em" style="margin-left: auto; margin-right: auto;">
}
}